This is the implementation of Angular which some slight changes to be able to run outside of Angular.
